import type { NextPage } from "next";
import Head from "next/head";
import { useWorkflowStore } from "@stores/workflow/WorkflowStore";
import { YamlPreview } from "@components/YamlPreview/YamlPreview";
import { OnField } from "@components/OnField/OnField";

const Home: NextPage = () => {
  const store = useWorkflowStore();

  const { name, on } = store;

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <section>
        <h2>Hello World</h2>
        <label htmlFor="name">Workflow Name</label>
        <input
          id="name"
          type="text"
          placeholder="Enter a name for your workflow"
          value={store.name ?? ""}
          onChange={(e) => store.changeName(e.currentTarget.value)}
        />
        <OnField />
      </section>

      <YamlPreview given={{ name, on }} />
    </div>
  );
};

export default Home;
